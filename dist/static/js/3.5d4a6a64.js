(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{35:function(t,e,n){},36:function(t,e,n){},37:function(t,e,n){t.exports=n.p+"static/imgs/banner1.6b55ddc.jpg"},38:function(t,e,n){t.exports=n.p+"static/imgs/banner2.bc31d27.jpg"},39:function(t,e,n){t.exports=n.p+"static/imgs/banner3.36be634.jpg"},40:function(t,e,n){"use strict";var i=n(35);n.n(i).a},41:function(t,e,n){"use strict";var i=n(36);n.n(i).a},42:function(t,e,n){"use strict";function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],i=!0,s=!1,a=void 0;try{for(var r,o=t[Symbol.iterator]();!(i=(r=o.next()).done)&&(n.push(r.value),!e||n.length!==e);i=!0);}catch(t){s=!0,a=t}finally{try{i||null==o.return||o.return()}finally{if(s)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.r(e);var s=null,a=document.documentElement.clientWidth,r={name:"banner",data:function(){return{initialItems:[],items:[n(37),n(38),n(39)],curItemIndex:0,curPaginationIndex:0,translateX:0,translateOffset:0,itemSpacing:30,speed:500,interval:3e3,animated:!1,loop:!0,startTime:0,startX:0,startY:0,offsetX:0}},created:function(){this.initBanner()},mounted:function(){var t=this;"/new"===this.$route.path&&(s=setInterval(function(){t.play()},this.interval))},watch:{"$route.path":function(t){var e=this;"/new"===t?s||(s=setInterval(function(){e.play()},this.interval)):s&&(clearInterval(s),s=null)}},methods:{initBanner:function(){var t=this.items,e=t[0],n=t[t.length-1];if(this.loop){this.items.push(e),this.items.unshift(n),this.speed=0,this.translateOffset=(a+this.itemSpacing)*(this.curItemIndex+1),this.translateX=this.translateOffset;var s=!0,r=!1,o=void 0;try{for(var c,l=t.entries()[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var u=i(c.value,2),h=u[0],f=u[1];0!==h&&h!==t.length-1&&this.initialItems.push(f)}}catch(t){r=!0,o=t}finally{try{s||null==l.return||l.return()}finally{if(r)throw o}}}else{var d=!0,m=!1,p=void 0;try{for(var g,v=t[Symbol.iterator]();!(d=(g=v.next()).done);d=!0)f=g.value,this.initialItems.push(f)}catch(t){m=!0,p=t}finally{try{d||null==v.return||v.return()}finally{if(m)throw p}}}},touchstart:function(t){this.startTime=(new Date).getTime(),this.startX=t.targetTouches[0].pageX,this.startY=t.targetTouches[0].pageY},touchmove:function(t){if(!this.animated){var e=t.targetTouches[0].pageX;this.offsetX=e-this.startX,this.speed=0,this.translateX=-this.offsetX+(a+this.itemSpacing)*this.curItemIndex+this.translateOffset}},touchend:function(t){var e=(new Date).getTime()-this.startTime<=500?50:a/2;this.offsetX>=e?this.play("prev"):this.offsetX<-e?this.play():this.translate(this.curItemIndex)},play:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"next";if(!this.animated){var e=this.items.length;"next"===t?this.curItemIndex++:this.curItemIndex--,!this.loop&&this.curItemIndex>e-1?this.curItemIndex=0:!this.loop&&this.curItemIndex<0&&(this.curItemIndex=e-1),this.translate(this.curItemIndex)}},translate:function(t){this.animated=!0,this.speed=500,this.translateX=(a+this.itemSpacing)*t+this.translateOffset,this.setPagination(t)},setPagination:function(t){var e=this.initialItems.length;this.curPaginationIndex=t,this.loop&&t<0?this.curPaginationIndex=e-1:this.loop&&t===e&&(this.curPaginationIndex=0)},transitionend:function(){this.offsetX=0,this.speed=0,this.animated=!1;var t=this.items.length;this.loop&&(this.curItemIndex>=t-2?this.curItemIndex=0:-1===this.curItemIndex&&(this.curItemIndex=t-3),this.translateX=(a+this.itemSpacing)*this.curItemIndex+this.translateOffset)}}},o=(n(40),n(2)),c=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"banner",on:{touchstart:t.touchstart,touchmove:t.touchmove,touchend:t.touchend}},[n("div",{ref:"bannerWrapper",staticClass:"banner-wrapper",style:{transform:"translateX(-"+t.translateX+"px)",transitionDuration:t.speed+"ms"},on:{transitionend:t.transitionend}},t._l(t.items,function(e,i){return n("div",{key:i,staticClass:"banner-item",style:{marginRight:t.itemSpacing+"px"}},[n("img",{attrs:{src:e,width:"100%"}})])}),0),t._v(" "),0<t.initialItems.length?n("div",{staticClass:"banner-pagination"},t._l(t.initialItems,function(e,i){return n("span",{key:i,class:{active:t.curPaginationIndex===i},on:{click:function(e){t.translate(i)}}})}),0):t._e()])},[],!1,null,null,null);c.options.__file="banner.vue";var l=c.exports,u=n(1),h={name:"list",data:function(){return{songList:[],page:1,totalPage:0,allLoaded:!1,isLoading:!1}},computed:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){var i,s,a;i=t,a=n[s=e],s in i?Object.defineProperty(i,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[s]=a})}return t}({},Object(u.mapState)(["curPlayIndex","view","isPlayed"]),{routerPath:function(){return this.$route.path.slice(1)}}),created:function(){this.getList()},mounted:function(){var t=this;document.onscroll=null,document.onscroll=function(){"search"===t.routerPath&&t.scrollLoad()}},watch:{$route:"getList"},methods:{getList:function(){var t=this,e=this.routerPath;this.$Indicator.open("加载中..."),"search"===e?(this.songList=[],this.searchList()):this.api.getList(e).then(function(e){200===e.status&&"OK"===e.statusText?(t.songList=e.data.data.slice(0)||[],t.$Indicator.close()):(t.songList=[],t.$Toast({message:"获取歌曲列表失败",duration:3}))}).catch(function(e){t.$Indicator.close(),t.$Toast("网络出现错误或服务暂时不可用")})},searchList:function(){var t=this,e=this.page,n=this.$route.query.keyword;this.isLoading=!0,this.$Indicator.open("加载中..."),this.api.getSongInfo(n,e).then(function(e){var n=e.data.data;if(200===e.status&&"OK"===e.statusText){var i=n.total;t.totalPage=Math.ceil(i/20);var s=t.songList.slice(0),a=n.lists.map(function(t){return{SingerName:t.SingerName,SongName:t.SongName,FileName:t.FileName}});t.isLoading=!1,t.$Indicator.close(),t.songList=s.concat(a),t.$store.commit("setSearchCount",i)}}).catch(function(e){t.$Indicator.close(),t.$Toast("网络出现错误或服务暂时不可用")})},play:function(t){var e=this.routerPath,n=this.songList;this.$store.commit("setView",e),this.$store.commit("setSongList",n),this.$store.commit("setCurPlayIndex",t),this.$store.dispatch("playSong")},scrollLoad:function(){if(!this.isLoading&&!this.allLoaded){var t=document.documentElement,e=t.scrollTop;t.scrollHeight-e-t.clientHeight<=100&&(this.page<this.totalPage?(this.page++,this.searchList()):(this.allLoaded=!0,this.$Toast("已加载全部数据！")))}}},components:{banner:l}},f=(n(41),Object(o.a)(h,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("banner",{directives:[{name:"show",rawName:"v-show",value:"new"===t.routerPath,expression:"routerPath === 'new'"}]}),t._v(" "),n("div",{staticClass:"list",class:[t.routerPath+"-songList",{noSongData:0===t.songList.length}]},[0<t.songList.length?n("ul",t._l(t.songList,function(e,i){return n("li",{key:i,class:{active:t.view===t.routerPath&&i===t.curPlayIndex&&t.isPlayed},on:{click:function(e){t.play(i)}}},[n("p",{staticClass:"filename"},[t._v(t._s(e.FileName))])])}),0):n("p",[t._v("暂无数据！")])])],1)},[],!1,null,null,null));f.options.__file="list.vue",e.default=f.exports}}]);