(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{108:function(t,e,i){},110:function(t,e,i){},127:function(t,e,i){},140:function(t,e,i){},142:function(t,e,i){},144:function(t,e,i){},66:function(t,e,i){"use strict";i.r(e),i(155);var s=i(65),a=i.n(s),r=(i(62),i(11)),o=i.n(r),n=(i(61),i(10)),c=i.n(n),l=(i(146),i(39)),u=i.n(l),d=i(0),h=i(1),p=Object(h.a)({name:"v-header",data:function(){return{keyword:"",resultCount:0,resultList:[],searchTip:"正在搜索...",tabs:[{path:"new",name:"新歌"},{path:"recommend",name:"推荐"},{path:"local",name:"本地"}]}},computed:{searchCount:function(){return this.$store.state.searchCount}},methods:{search:function(t){t&&""!==t.trim()?(this.$router.push("/search?keyword="+t),this.keyword=""):this.$MessageBox.alert("请输入搜索内容")},input:function(){var t=this,e=this.keyword;e&&""!==e.trim()&&(this.resultCount=0,this.searchTip="正在搜索...",this.api.search(e).then(function(e){200===e.status&&"OK"===e.statusText?(t.resultList=e.data.data[0].RecordDatas,t.resultCount=e.data.data[0].RecordCount,t.resultList.length<=0&&(t.resultCount=0,t.searchTip="暂无结果...")):t.searchTip="搜索出错, 请稍后重试"}).catch(function(e){t.resultCount=0,t.searchTip="网络出现错误或服务不可用"}))}}},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"header"}},[i("div",{staticClass:"header-search"},[i("div",{staticClass:"logo"}),t._v(" "),i("div",{staticClass:"search-form"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:"歌手/歌名"},domProps:{value:t.keyword},on:{input:[function(e){e.target.composing||(t.keyword=e.target.value)},t.input],keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.search(t.keyword)}}}),t._v(" "),""!==t.keyword.trim()?i("div",{staticClass:"search-list"},[t.resultCount>0?i("ul",t._l(t.resultList,function(e){return i("li",{on:{click:function(i){t.search(e.HintInfo)}}},[t._v(t._s(e.HintInfo))])})):i("p",[t._v(t._s(t.searchTip))])]):t._e()]),t._v(" "),i("div",{staticClass:"search",on:{click:function(e){t.search(t.keyword)}}})]),t._v(" "),"/search"!==t.$route.path?i("div",{staticClass:"header-tab"},[i("ul",t._l(t.tabs,function(e){return i("li",[i("router-link",{attrs:{to:e.path}},[t._v(t._s(e.name))])],1)}))]):i("div",{staticClass:"header-search-result"},[i("div",{staticClass:"goback",on:{click:function(e){t.$router.go(-1)}}}),t._v(" "),i("div",{staticClass:"searchCount"},[t._v("共有"),i("em",[t._v(t._s(t.searchCount))]),t._v("条结果")])])])},[],!1,function(t){i(142)},null,null).exports,m=i(5),f=i.n(m),g=i(64),v=i.n(g),y=i(9),C=i.n(y),w=i(14),I=i.n(w),L=i(2),S={name:"play-operate",computed:f()({},Object(L.mapState)(["paused","showDetail","curPlayIndex"])),methods:{togglePlayState:function(){this.$store.commit("setPaused")},changePlay:function(t){var e=this.curPlayIndex;"next"===t?e++:e--,this.$store.commit("setCurPlayIndex",e),this.$store.dispatch("playSong")}}},P=Object(h.a)(S,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"play-operate",class:{"play-detail":t.showDetail}},[i("span",{staticClass:"prev",on:{click:function(e){t.changePlay("prev")}}}),t._v(" "),i("span",{staticClass:"play",class:{pause:t.paused},on:{click:t.togglePlayState}}),t._v(" "),i("span",{staticClass:"next",on:{click:function(e){t.changePlay("next")}}})])},[],!1,function(t){i(110)},null,null).exports,x={name:"play-detail",data:function(){return{isShowList:!1,curPlayTime:0,curLrcIndex:0,progress:0,progressSpeed:0,endTime:0,progressTimer:null,rollTimer:null,translateY:0,mode:1,modeTip:"顺序播放",showModeTip:!1,modeSwitch:!1,currentImgSrc:"",isShowColorList:!1,defaultColor:"",activeColor:"",lrcColorList:[{defaultColor:"#b2f5b5",activeColor:"#d1c90e",currentImgSrc:"static/img/current-type1.png"},{defaultColor:"#c1f3dc",activeColor:"#33a3f5",currentImgSrc:"static/img/current-type2.png"},{defaultColor:"#a0f533",activeColor:"#f32d2d",currentImgSrc:"static/img/current-type3.png"},{defaultColor:"#eff366",activeColor:"#21d10e",currentImgSrc:"static/img/current-type4.png"},{defaultColor:"#efe8b2",activeColor:"#d200d2",currentImgSrc:"static/img/current-type5.png"}]}},computed:f()({},Object(L.mapState)(["view","curPlayIndex","songList","audio","isPlayed","showDetail","paused","curPlayImgSrc","curPlayLrcArr","lock","modeType","lrcSwitch"]),Object(L.mapGetters)(["curPlayFileName","listTotal"]),{songData:function(){return this.songList[this.curPlayIndex]}}),created:function(){this.init()},watch:{isPlayed:function(t,e){t&&this.initPlay()},paused:function(t,e){var i=this;t?this.clearTimer():(this.progressTimer=setTimeout(function(){i.progressGo()},1e3),this.rollTimer=setTimeout(function(){i.lrcRoll()},100))},curLrcIndex:function(t,e){if(this.$store.commit("setCurLrcIndex",t),this.showDetail){var i=this.$refs.lrcBox,s=i.offsetHeight,a=i.firstChild.offsetHeight,r=Math.floor(s/a);this.translateY=t>=r-1?a*(t-r+1):0}}},methods:{init:function(){var t=1,e=window.localStorage,i=e.currentColorObj,s=e.modeType,a=e.lrcSwitch;i=i?JSON.parse(i):this.lrcColorList[0],s||(s="order"),"loop"===s?t=2:"random"===s&&(t=3),a="false"!==a,this.$store.commit("setModeType",s),this.$store.commit("setLrcSwitch",a),this.$store.commit("setLrcColor",{defaultColor:i.defaultColor,activeColor:i.activeColor}),this.mode=t,this.currentImgSrc=i.currentImgSrc,this.defaultColor=i.defaultColor,this.activeColor=i.activeColor},initPlay:function(){this.progress=0,this.curPlayTime=0,this.audio.currentTime=0,this.endTime=parseInt(this.audio.duration),this.progressSpeed=Number((100/this.endTime).toFixed(2)),this.progressTimer&&this.clearTimer(),this.progressGo(),this.lrcRoll()},progressGo:function(){var t=this;this.curPlayTime++,this.progress+=this.progressSpeed,this.progress<100?this.progressTimer=setTimeout(function(){t.progressGo()},1e3):(this.progress=100,this.curPlayTime=this.endTime,this.dealMode())},lrcRoll:function(){var t=this,e=this.curPlayLrcArr,i=Number(this.audio.currentTime.toFixed(2)),s=!0,a=!1,r=void 0;try{for(var o,n=C()(e.entries());!(s=(o=n.next()).done);s=!0){var c=o.value,l=I()(c,2),u=l[0],d=l[1];if(Number(d.startTime)>=i){0===u?u=1:u===e.length-1&&(u=e.length-1),this.curLrcIndex=u-1;break}this.curLrcIndex=e.length-1}}catch(t){a=!0,r=t}finally{try{!s&&n.return&&n.return()}finally{if(a)throw r}}i<this.endTime&&(this.rollTimer=setTimeout(function(){t.lrcRoll()},100))},updateProgress:function(t){var e=t.offsetX,i=this.$refs.progressBar.offsetWidth;this.progress=Number((e/i*100).toFixed(2)),this.curPlayTime=parseInt((this.endTime*this.progress/100).toFixed(2)),this.audio.currentTime=this.curPlayTime,this.$store.commit("setLock",!0)},switchMode:function(){var t=this;if(!this.modeSwitch){var e="",i=!1;this.mode++,this.modeSwitch=!0,this.showModeTip=!0,this.mode%3==1?(this.modeTip="顺序播放",e="order"):this.mode%3==2?(this.modeTip="循环播放",e="loop",i=!0):(this.modeTip="随机播放",e="random"),this.$store.commit("setLoop",i),this.$store.commit("setModeType",e),window.localStorage.modeType=e,setTimeout(function(){t.modeSwitch=!1,t.showModeTip=!1},3e3)}},dealMode:function(){if(this.$store.commit("setLock",!1),"random"===this.modeType){var t=Math.floor(Math.random()*this.listTotal);this.$store.commit("setCurPlayIndex",t),this.$store.dispatch("playSong")}else"loop"===this.modeType&&this.initPlay()},clearTimer:function(){clearTimeout(this.progressTimer),clearTimeout(this.rollTimer)},playSong:function(t){this.$store.commit("setCurPlayIndex",t),this.$store.dispatch("playSong"),this.isShowList=!1},changeLrcColor:function(t){var e=this.lrcColorList[t];this.currentImgSrc=e.currentImgSrc,this.defaultColor=e.defaultColor,this.activeColor=e.activeColor,this.isShowColorList=!1;var i={currentImgSrc:this.currentImgSrc,defaultColor:this.defaultColor,activeColor:this.activeColor};this.$store.commit("setLrcColor",{defaultColor:this.defaultColor,activeColor:this.activeColor}),window.localStorage.currentColorObj=v()(i)},toggleLrcSwitch:function(t){t=!t,this.$store.commit("setLrcSwitch",t)}},filters:{formatDate:function(t){var e=parseInt(t/60),i=parseInt(t%60);return e<10&&(e="0"+e),i<10&&(i="0"+i),e+":"+i}},components:{"play-operate":P}},_=Object(h.a)(x,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"move"}},[t.showDetail?i("div",{staticClass:"playDetail",style:{"background-image":"url("+t.curPlayImgSrc+")"}},[i("div",{staticClass:"playDetail-mark"}),t._v(" "),i("div",{staticClass:"playDetail-top"},[i("div",{staticClass:"goback",on:{click:function(e){t.$store.commit("setShowDetail",!1)}}}),t._v(" "),i("div",{staticClass:"playDetail-title"},[t._v(t._s(t.curPlayFileName))])]),t._v(" "),i("div",{staticClass:"playDetail-center"},[i("div",{ref:"lrcBox",staticClass:"lrc-box",style:{transform:"translateY(-"+t.translateY+"px)",color:t.defaultColor}},t._l(t.curPlayLrcArr,function(e,s){return i("p",{style:{color:t.curLrcIndex===s?t.activeColor:""},attrs:{startTime:e.startTime}},[t._v(t._s(e.curLrc))])}))]),t._v(" "),i("div",{staticClass:"playDetail-bottom"},[i("div",{staticClass:"lrc-switch"},[i("mt-switch",{attrs:{value:t.lrcSwitch},on:{change:t.toggleLrcSwitch}})],1),t._v(" "),i("div",{staticClass:"lrcColor-box"},[i("div",{staticClass:"cur-lrcColor",style:{backgroundImage:"url("+t.currentImgSrc+")"},on:{click:function(e){t.isShowColorList=!t.isShowColorList}}}),t._v(" "),i("transition",{attrs:{name:"fade"}},[t.isShowColorList?i("div",{staticClass:"color-list"},[i("ul",t._l(t.lrcColorList,function(e,s){return i("li",{style:{backgroundImage:"url("+e.currentImgSrc+")"},on:{click:function(e){t.changeLrcColor(s)}}})}))]):t._e()])],1),t._v(" "),i("div",{staticClass:"time-wrap"},[i("div",{staticClass:"start-time"},[t._v(t._s(t._f("formatDate")(t.curPlayTime)))]),t._v(" "),i("div",{staticClass:"progress-wrap"},[i("div",{ref:"progressBar",staticClass:"progress-bar",on:{click:t.updateProgress}}),t._v(" "),i("div",{staticClass:"progress",style:{width:t.progress+"%"}}),t._v(" "),i("div",{ref:"progressDot",staticClass:"progress-dot",style:{"margin-left":t.progress+"%"}})]),t._v(" "),i("div",{staticClass:"end-time"},[t._v(t._s(t._f("formatDate")(t.endTime)))])]),t._v(" "),i("div",{staticClass:"play-operateBox"},[i("div",{staticClass:"listen-mode order-play",class:t.modeType+"-play",on:{click:t.switchMode}},[i("transition",{attrs:{name:"fade"}},[t.showModeTip?i("div",{staticClass:"mode-tip"},[t._v(t._s(t.modeTip))]):t._e()])],1),t._v(" "),i("play-operate"),t._v(" "),i("div",{staticClass:"list-detail"},[i("div",{staticClass:"icon-list",class:{"active-list":t.isShowList},on:{click:function(e){t.isShowList=!t.isShowList}}}),t._v(" "),i("transition",{attrs:{name:"fade"}},[t.isShowList?i("div",{staticClass:"play-list"},[i("ul",t._l(t.songList,function(e,s){return i("li",{class:{active:t.curPlayIndex===s},on:{click:function(e){t.playSong(s)}}},[t._v("\n                                    "+t._s(s+1)+". "+t._s(e.FileName)+"\n                                ")])}))]):t._e()])],1)],1)])]):t._e()])},[],!1,function(t){i(127)},null,null).exports,T={name:"player",computed:f()({},Object(L.mapState)(["audioSrc","canPlayed","isPlayed","showDetail","curPlayIndex","curPlayImgSrc","paused","lock","loop","modeType"]),Object(L.mapGetters)(["curPlaySingerName","curPlaySongName","curPlayFileName"])),methods:{showPlayDetail:function(){this.$store.commit("setShowDetail",!0)},canplay:function(){if(!this.lock){var t=this.$refs.audio;4===t.readyState?(t.play(),this.$store.commit("setAudio",t),this.$store.commit("setIsPlayed",!0)):this.$Toast({message:"歌曲暂时无法播放, 请稍后重试",duration:3})}},ended:function(){if("order"===this.modeType){var t=this.curPlayIndex;t++,this.$store.commit("setCurPlayIndex",t),this.$store.dispatch("playSong")}}},components:{"play-operate":P,"play-detail":_}},b=Object(h.a)(T,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[t.canPlayed?i("div",{staticClass:"player"},[i("div",{staticClass:"footer-play",style:{visibility:t.showDetail?"hidden":"visible"}},[i("div",{staticClass:"footer-left",on:{click:t.showPlayDetail}},[i("div",{staticClass:"footer-singer",class:{rotate:t.isPlayed,paused:t.paused}},[i("img",{attrs:{src:t.curPlayImgSrc}})]),t._v(" "),i("div",{staticClass:"footer-playerInfo"},[i("p",{staticClass:"song-name"},[t._v(t._s(t.curPlaySongName))]),t._v(" "),i("p",{staticClass:"singer-name"},[t._v(t._s(t.curPlaySingerName))])])]),t._v(" "),i("div",{staticClass:"footer-right"},[i("play-operate")],1)]),t._v(" "),i("keep-alive",[i("play-detail")],1),t._v(" "),i("div",{staticClass:"audio"},[i("audio",{ref:"audio",attrs:{src:t.audioSrc,loop:t.loop},on:{canplay:t.canplay,ended:t.ended}})])],1):t._e()])},[],!1,function(t){i(140)},null,null).exports,$={name:"suspend-lyric",data:function(){return{isDrag:!1,startX:0,startY:0,offsetX:0,offsetY:0}},computed:f()({},Object(L.mapState)(["canPlayed","curPlayLrcArr","curLrcIndex","lrcColor","lrcSwitch"]),{boundary:function(){return{left:0,right:document.body.offsetWidth-this.$refs.suspendLyric.offsetWidth,top:0,bottom:document.body.offsetHeight-this.$refs.suspendLyric.offsetHeight}},firstLrc:function(){var t=this.curPlayLrcArr,e=this.curLrcIndex;return 0===e?t[0]:(e+1)%2==0?t[e+1]?t[e+1]:f()({},t[e],{index:e+1,curLrc:""}):t[e]},nextLrc:function(){var t=this.curPlayLrcArr,e=this.curLrcIndex;return 0===e||1===e?t[1]:(e+1)%2==1?t[e+1]?t[e+1]:f()({},t[e],{index:e+1,curLrc:""}):t[e]}}),methods:{touchstart:function(t){this.isDrag=!0,this.startX=t.targetTouches[0].pageX,this.startY=t.targetTouches[0].pageY,this.offsetX=this.$refs.suspendLyric.offsetLeft,this.offsetY=this.$refs.suspendLyric.offsetTop},touchmove:function(t){var e=t.targetTouches[0].pageX,i=t.targetTouches[0].pageY,s=e-this.startX+this.offsetX,a=i-this.startY+this.offsetY;s<=this.boundary.left?s=this.boundary.left:s>=this.boundary.right&&(s=this.boundary.right),a<=this.boundary.top?a=this.boundary.top:a>=this.boundary.bottom&&(a=this.boundary.bottom),this.$refs.suspendLyric.style.left=s+"px",this.$refs.suspendLyric.style.top=a+"px"},touchend:function(){this.isDrag=!1},close:function(){this.$store.commit("setLrcSwitch",!1)}}},k={name:"app",components:{"v-header":p,"suspend-lyric":Object(h.a)($,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"fade"}},[t.canPlayed&&t.lrcSwitch?i("div",{ref:"suspendLyric",attrs:{id:"suspend-lyric"},on:{touchstart:t.touchstart,touchmove:function(e){return e.preventDefault(),t.touchmove(e)},touchend:t.touchend}},[i("span",{staticClass:"close",on:{click:t.close}}),t._v(" "),i("p",{style:{color:t.firstLrc.index===t.curLrcIndex?t.lrcColor.activeColor:t.lrcColor.defaultColor}},[t._v(t._s(t.firstLrc.curLrc))]),t._v(" "),i("p",{style:{color:t.nextLrc.index===t.curLrcIndex?t.lrcColor.activeColor:t.lrcColor.defaultColor}},[t._v(t._s(t.nextLrc.curLrc))])]):t._e()])},[],!1,function(t){i(108)},null,null).exports,player:b}},D=Object(h.a)(k,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("v-header"),this._v(" "),e("keep-alive",[e("router-view")],1),this._v(" "),e("player"),this._v(" "),e("suspend-lyric")],1)},[],!1,function(t){i(144)},null,null).exports,N=i(19),O=i.n(N),X=i(15),A=i.n(X),j={new:"/api/new",recommend:"/api/recommend",local:"/api/local",search:"/searchtip",play:"/play",songsearch:"/songsearch"},M={search:function(t){return new O.a(function(e,i){var s={keyword:t};A.a.post(j.search,s).then(function(t){e(t)}).catch(i)})},getList:function(t){return new O.a(function(e,i){A.a.post(j[t]).then(function(t){e(t)}).catch(i)})},getSongInfo:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new O.a(function(i,s){var a={page:e,pagesize:20,keyword:t,platform:"WebFilter",userid:-1,iscorrection:1,privilege_filter:0,filter:2};A.a.get(j.songsearch,{params:a}).then(function(t){i(t)}).catch(s)})},play:function(t){return new O.a(function(e,i){var s={r:"play/getdata",hash:t};A.a.get(j.play,{params:s}).then(function(t){e(t)}).catch(i)})}},F={playSong:function(t){var e=t.commit,i=t.getters;o.a.open("加载中..."),e("setIsPlayed",!1),e("setAudioSrc",""),e("setCurPlayLrcArr",[]),e("setCurPlayImgSrc","static/img/singer-default.jpg"),e("setPaused"),e("setLock",!1),e("setCurLrcIndex",0);var s=i.curPlayFileName;M.getSongInfo(s).then(function(t){if(200===t.status&&"OK"===t.statusText){var e=t.data.data.lists[0].FileHash;a(e)}else c()({message:"播放歌曲失败",duration:3})}).catch(function(t){o.a.close(),c()("网络出现错误或服务暂时不可用")});var a=function(t){M.play(t).then(function(t){if(200===t.status&&"OK"===t.statusText){var i=t.data.data;if(!i.play_url)return c()({message:"暂无播放来源",duration:3}),void o.a.close("加载中...");var s=i.play_url,a=i.img,r=i.lyrics;o.a.close(),e("setCanPlayed",!0),e("setAudioSrc",s),e("setCurPlayLrcArr",r),e("setCurPlayImgSrc",a)}else c()({message:"播放歌曲失败",duration:3})}).catch(function(t){o.a.close(),c()("网络出现错误或服务暂时不可用")})}}},E={setView:function(t,e){t.view=e},setSongList:function(t,e){t.songList=e},setSearchCount:function(t,e){t.searchCount=e},setShowDetail:function(t,e){t.showDetail=e},setAudio:function(t,e){t.audio=e},setAudioSrc:function(t,e){t.audioSrc=e},setIsPlayed:function(t,e){t.isPlayed=e},setCanPlayed:function(t,e){t.canPlayed=e},setPaused:function(t){t.audioSrc?(t.paused=!t.paused,t.paused?t.audio.pause():t.audio.play()):t.paused=!1},setCurPlayIndex:function(t,e){var i=t.songList.length;e<0?e=i-1:e>=i&&(e=0),t.curPlayIndex=e},setCurPlayImgSrc:function(t,e){t.curPlayImgSrc=e},setCurPlayLrcArr:function(t,e){if(0!==e.length){var i=e.replace(/\n/g,"").split("[").slice(1),s=[],a=!0,r=!1,o=void 0;try{for(var n,c=C()(i.entries());!(a=(n=c.next()).done);a=!0){var l=n.value,u=I()(l,2),d=u[0],h=u[1],p=h.split("]")[0].replace(".",":").split(":"),m={index:d,startTime:(60*Number(p[0])+Number(p[1])+Number(p[2])/1e3).toFixed(2),curLrc:h.split("]")[1]};s.push(m)}}catch(t){r=!0,o=t}finally{try{!a&&c.return&&c.return()}finally{if(r)throw o}}t.curPlayLrcArr=s}},setLock:function(t,e){t.lock=e},setLoop:function(t,e){t.loop=e},setModeType:function(t,e){t.modeType=e},setCurLrcIndex:function(t,e){t.curLrcIndex=e},setLrcColor:function(t,e){t.lrcColor=e},setLrcSwitch:function(t,e){t.lrcSwitch=e,window.localStorage.lrcSwitch=e}};d.default.use(L.default);var Y=new L.default.Store({state:{view:"",songList:[],searchCount:0,showDetail:!1,audio:null,audioSrc:null,isPlayed:!1,canPlayed:!1,paused:!1,curPlayIndex:-1,curPlayImgSrc:"",curPlayLrcArr:[],lock:!1,loop:!1,modeType:"order",curLrcIndex:0,lrcSwitch:!1,lrcColor:{defaultColor:"#b2f5b5",activeColor:"#d1c90e"}},getters:{listTotal:function(t){return t.songList.length},curPlayFileName:function(t){return t.curPlayIndex<0?"":t.songList[t.curPlayIndex].FileName},curPlaySongName:function(t){return t.curPlayIndex<0?"":t.songList[t.curPlayIndex].SongName},curPlaySingerName:function(t){return t.curPlayIndex<0?"":t.songList[t.curPlayIndex].SingerName}},actions:F,mutations:E}),W=i(25),B=document.documentElement.clientWidth,R=window.navigator.appVersion.match(/iphone/gi)?Math.floor(window.devicePixelRatio):1,z={name:"banner",data:function(){return{initialItems:[],items:["static/img/banner1.jpg","static/img/banner2.jpg","static/img/banner3.jpg"],curItemIndex:0,curPaginationIndex:0,translateX:0,translateOffset:0,itemSpacing:30,speed:500,interval:3e3,animated:!1,loop:!0,startTime:0,startX:0,startY:0,offsetX:0}},computed:{bannerWrapperSize:function(){return B*R}},created:function(){this.initBanner()},mounted:function(){var t=this;setInterval(function(){t.play()},this.interval)},methods:{initBanner:function(){var t=this.items,e=t[0],i=t[t.length-1];if(this.loop){this.items.push(e),this.items.unshift(i),this.speed=0,this.translateOffset=(this.bannerWrapperSize+this.itemSpacing)*(this.curItemIndex+1),this.translateX=this.translateOffset;var s=!0,a=!1,r=void 0;try{for(var o,n=C()(t.entries());!(s=(o=n.next()).done);s=!0){var c=o.value,l=I()(c,2),u=l[0],d=l[1];0!==u&&u!==t.length-1&&this.initialItems.push(d)}}catch(t){a=!0,r=t}finally{try{!s&&n.return&&n.return()}finally{if(a)throw r}}}else{var h=!0,p=!1,m=void 0;try{for(var f,g=C()(t);!(h=(f=g.next()).done);h=!0){var v=f.value;this.initialItems.push(v)}}catch(t){p=!0,m=t}finally{try{!h&&g.return&&g.return()}finally{if(p)throw m}}}},touchstart:function(t){this.startTime=(new Date).getTime(),this.startX=t.targetTouches[0].pageX,this.startY=t.targetTouches[0].pageY},touchmove:function(t){if(!this.animated){var e=t.targetTouches[0].pageX;this.offsetX=e-this.startX,this.speed=0,this.translateX=-this.offsetX+(this.bannerWrapperSize+this.itemSpacing)*this.curItemIndex+this.translateOffset}},touchend:function(t){var e=(new Date).getTime()-this.startTime<=500?50:this.bannerWrapperSize/2;this.offsetX>=e?this.play("prev"):this.offsetX<-e?this.play():this.translate(this.curItemIndex)},play:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next";if(!this.animated){var e=this.items.length;"next"===t?this.curItemIndex++:this.curItemIndex--,!this.loop&&this.curItemIndex>e-1?this.curItemIndex=0:!this.loop&&this.curItemIndex<0&&(this.curItemIndex=e-1),this.translate(this.curItemIndex)}},translate:function(t){this.animated=!0,this.speed=500,this.translateX=(this.bannerWrapperSize+this.itemSpacing)*t+this.translateOffset,this.setPagination(t)},setPagination:function(t){var e=this.initialItems.length;this.curPaginationIndex=t,this.loop&&t<0?this.curPaginationIndex=e-1:this.loop&&t===e&&(this.curPaginationIndex=0)},transitionend:function(){this.offsetX=0,this.speed=0,this.animated=!1;var t=this.items.length;this.loop&&(this.curItemIndex>=t-2?this.curItemIndex=0:-1===this.curItemIndex&&(this.curItemIndex=t-3),this.translateX=(this.bannerWrapperSize+this.itemSpacing)*this.curItemIndex+this.translateOffset)}}},H=Object(h.a)(z,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"banner",on:{touchstart:t.touchstart,touchmove:t.touchmove,touchend:t.touchend}},[i("div",{ref:"bannerWrapper",staticClass:"banner-wrapper",style:{transform:"translateX(-"+t.translateX+"px)",transitionDuration:t.speed+"ms"},on:{transitionend:t.transitionend}},t._l(t.items,function(e){return i("div",{staticClass:"banner-item",style:{marginRight:t.itemSpacing+"px"}},[i("img",{attrs:{src:e,width:"100%"}})])})),t._v(" "),t.initialItems.length>0?i("div",{staticClass:"banner-pagination"},t._l(t.initialItems,function(e,s){return i("span",{class:{active:t.curPaginationIndex===s},on:{click:function(e){t.translate(s)}}})})):t._e()])},[],!1,function(t){i(72)},null,null).exports,G={name:"list",data:function(){return{songList:[],page:1,totalPage:0,allLoaded:!1,isLoading:!1}},computed:f()({},Object(L.mapState)(["curPlayIndex","view","isPlayed"]),{routerPath:function(){return this.$route.path.slice(1)}}),created:function(){this.getList()},mounted:function(){var t=this;document.onscroll=null,document.onscroll=function(){"search"===t.routerPath&&t.scrollLoad()}},watch:{$route:"getList"},methods:{getList:function(){var t=this,e=this.routerPath;this.$Indicator.open("加载中..."),"search"===e?(this.songList=[],this.searchList()):this.api.getList(e).then(function(e){200===e.status&&"OK"===e.statusText?(t.songList=e.data.data.slice(0)||[],t.$Indicator.close()):(t.songList=[],t.$Toast({message:"获取歌曲列表失败",duration:3}))}).catch(function(e){t.$Indicator.close(),t.$Toast("网络出现错误或服务暂时不可用")})},searchList:function(){var t=this,e=this.page,i=this.$route.query.keyword;this.isLoading=!0,this.$Indicator.open("加载中..."),this.api.getSongInfo(i,e).then(function(e){var i=e.data.data;if(200===e.status&&"OK"===e.statusText){var s=i.total;t.totalPage=Math.ceil(s/20);var a=t.songList.slice(0),r=i.lists.map(function(t){return{SingerName:t.SingerName,SongName:t.SongName,FileName:t.FileName}});t.isLoading=!1,t.$Indicator.close(),t.songList=a.concat(r),t.$store.commit("setSearchCount",s)}}).catch(function(e){t.$Indicator.close(),t.$Toast("网络出现错误或服务暂时不可用")})},play:function(t){var e=this.routerPath,i=this.songList;this.$store.commit("setView",e),this.$store.commit("setSongList",i),this.$store.commit("setCurPlayIndex",t),this.$store.dispatch("playSong")},scrollLoad:function(){if(!this.isLoading&&!this.allLoaded){var t=document.documentElement,e=t.scrollTop;t.scrollHeight-e-t.clientHeight<=100&&(this.page<this.totalPage?(this.page++,this.searchList()):(this.allLoaded=!0,this.$Toast("已加载全部数据！")))}}},components:{banner:H}},K=Object(h.a)(G,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},["new"===t.routerPath?i("banner"):t._e(),t._v(" "),i("div",{staticClass:"list",class:[t.routerPath+"-songList",{noSongData:0===t.songList.length}]},[t.songList.length>0?i("ul",t._l(t.songList,function(e,s){return i("li",{class:{active:t.view===t.routerPath&&s===t.curPlayIndex&&t.isPlayed},on:{click:function(e){t.play(s)}}},[i("p",{staticClass:"filename"},[t._v(t._s(e.FileName))])])})):i("p",[t._v("暂无数据！")])])],1)},[],!1,function(t){i(74)},null,null).exports;d.default.use(W.default);var V=new W.default({linkActiveClass:"active",routes:[{path:"/",redirect:"/new"},{path:"/*",component:K}]});(function(){var t="onorientationchange"in window?"onorientationchange":"resize",e=window.navigator.appVersion.match(/iphone/gi),i=window.devicePixelRatio,s=1/(i=e?i>=3&&(!i||i>=3)?3:i>=2&&(!i||i>=2)?2:1:1),a=document.documentElement,r=document.querySelector("meta[name='viewport']");r||((r=document.createElement("meta")).setAttribute("name","viewport"),document.querySelector("head").appendChild(r));var o=function(){var t=a.getBoundingClientRect().width;t/i>540&&(t=540*i);var e=t/10;r.setAttribute("content","initial-scale="+s+",maximum-scale="+s+", minimum-scale="+s+",user-scalable=no"),a.setAttribute("data-dpr",i),a.style.fontSize=e+"px"};window.addEventListener(t,o,!1),document.addEventListener("DOMContentLoaded",o,!1)})(),d.default.prototype.api=M,d.default.component(u.a.name,u.a),d.default.prototype.$Toast=c.a,d.default.prototype.$Indicator=o.a,d.default.prototype.$MessageBox=a.a,d.default.config.productionTip=!1;var q=new d.default({el:"#app",store:Y,router:V,template:"<App/>",components:{App:D}});window.vm=q},72:function(t,e,i){},74:function(t,e,i){}},[[66,0,1,2]]]);