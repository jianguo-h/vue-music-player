(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{161:function(t,e,i){},162:function(t,e,i){},163:function(t,e,i){t.exports=i.p+"static/img/banner1.6b55ddc.jpg"},164:function(t,e,i){t.exports=i.p+"static/img/banner2.bc31d27.jpg"},165:function(t,e,i){t.exports=i.p+"static/img/banner3.36be634.jpg"},166:function(t,e,i){"use strict";var n=i(161);i.n(n).a},168:function(t,e,i){"use strict";var n=i(162);i.n(n).a},170:function(t,e,i){"use strict";i.r(e);var n=i(7),s=i.n(n),a=i(16),r=i.n(a),o=i(25),c=i.n(o),h=null,l=document.documentElement.clientWidth,u={name:"banner",data:function(){return{initialItems:[],items:[i(163),i(164),i(165)],curItemIndex:0,curPaginationIndex:0,translateX:0,translateOffset:0,itemSpacing:30,speed:500,interval:3e3,animated:!1,loop:!0,startTime:0,startX:0,startY:0,offsetX:0}},created:function(){this.initBanner()},mounted:function(){var t=this;"/new"===this.$route.path&&(h=setInterval(function(){t.play()},this.interval))},watch:{"$route.path":function(t){var e=this;"/new"===t?h||(h=setInterval(function(){e.play()},this.interval)):h&&(clearInterval(h),h=null)}},methods:{initBanner:function(){var t=this.items,e=t[0],i=t[t.length-1];if(this.loop){this.items.push(e),this.items.unshift(i),this.speed=0,this.translateOffset=(l+this.itemSpacing)*(this.curItemIndex+1),this.translateX=this.translateOffset;var n=!0,s=!1,a=void 0;try{for(var o,h=r()(t.entries());!(n=(o=h.next()).done);n=!0){var u=o.value,d=c()(u,2),m=d[0],f=d[1];0!==m&&m!==t.length-1&&this.initialItems.push(f)}}catch(t){s=!0,a=t}finally{try{!n&&h.return&&h.return()}finally{if(s)throw a}}}else{var g=!0,p=!1,v=void 0;try{for(var I,x=r()(t);!(g=(I=x.next()).done);g=!0){var y=I.value;this.initialItems.push(y)}}catch(t){p=!0,v=t}finally{try{!g&&x.return&&x.return()}finally{if(p)throw v}}}},touchstart:function(t){this.startTime=(new Date).getTime(),this.startX=t.targetTouches[0].pageX,this.startY=t.targetTouches[0].pageY},touchmove:function(t){if(!this.animated){var e=t.targetTouches[0].pageX;this.offsetX=e-this.startX,this.speed=0,this.translateX=-this.offsetX+(l+this.itemSpacing)*this.curItemIndex+this.translateOffset}},touchend:function(t){var e=(new Date).getTime()-this.startTime<=500?50:l/2;this.offsetX>=e?this.play("prev"):this.offsetX<-e?this.play():this.translate(this.curItemIndex)},play:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"next";if(!this.animated){var e=this.items.length;"next"===t?this.curItemIndex++:this.curItemIndex--,!this.loop&&this.curItemIndex>e-1?this.curItemIndex=0:!this.loop&&this.curItemIndex<0&&(this.curItemIndex=e-1),this.translate(this.curItemIndex)}},translate:function(t){this.animated=!0,this.speed=500,this.translateX=(l+this.itemSpacing)*t+this.translateOffset,this.setPagination(t)},setPagination:function(t){var e=this.initialItems.length;this.curPaginationIndex=t,this.loop&&t<0?this.curPaginationIndex=e-1:this.loop&&t===e&&(this.curPaginationIndex=0)},transitionend:function(){this.offsetX=0,this.speed=0,this.animated=!1;var t=this.items.length;this.loop&&(this.curItemIndex>=t-2?this.curItemIndex=0:-1===this.curItemIndex&&(this.curItemIndex=t-3),this.translateX=(l+this.itemSpacing)*this.curItemIndex+this.translateOffset)}}},d=(i(166),i(5)),m=Object(d.a)(u,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"banner",on:{touchstart:t.touchstart,touchmove:t.touchmove,touchend:t.touchend}},[i("div",{ref:"bannerWrapper",staticClass:"banner-wrapper",style:{transform:"translateX(-"+t.translateX+"px)",transitionDuration:t.speed+"ms"},on:{transitionend:t.transitionend}},t._l(t.items,function(e,n){return i("div",{key:n,staticClass:"banner-item",style:{marginRight:t.itemSpacing+"px"}},[i("img",{attrs:{src:e,width:"100%"}})])})),t._v(" "),t.initialItems.length>0?i("div",{staticClass:"banner-pagination"},t._l(t.initialItems,function(e,n){return i("span",{key:n,class:{active:t.curPaginationIndex===n},on:{click:function(e){t.translate(n)}}})})):t._e()])},[],!1,null,null,null).exports,f=i(1),g={name:"list",data:function(){return{songList:[],page:1,totalPage:0,allLoaded:!1,isLoading:!1}},computed:s()({},Object(f.c)(["curPlayIndex","view","isPlayed"]),{routerPath:function(){return this.$route.path.slice(1)}}),created:function(){this.getList()},mounted:function(){var t=this;document.onscroll=null,document.onscroll=function(){"search"===t.routerPath&&t.scrollLoad()}},watch:{$route:"getList"},methods:{getList:function(){var t=this,e=this.routerPath;this.$Indicator.open("加载中..."),"search"===e?(this.songList=[],this.searchList()):this.api.getList(e).then(function(e){200===e.status&&"OK"===e.statusText?(t.songList=e.data.data.slice(0)||[],t.$Indicator.close()):(t.songList=[],t.$Toast({message:"获取歌曲列表失败",duration:3}))}).catch(function(e){t.$Indicator.close(),t.$Toast("网络出现错误或服务暂时不可用")})},searchList:function(){var t=this,e=this.page,i=this.$route.query.keyword;this.isLoading=!0,this.$Indicator.open("加载中..."),this.api.getSongInfo(i,e).then(function(e){var i=e.data.data;if(200===e.status&&"OK"===e.statusText){var n=i.total;t.totalPage=Math.ceil(n/20);var s=t.songList.slice(0),a=i.lists.map(function(t){return{SingerName:t.SingerName,SongName:t.SongName,FileName:t.FileName}});t.isLoading=!1,t.$Indicator.close(),t.songList=s.concat(a),t.$store.commit("setSearchCount",n)}}).catch(function(e){t.$Indicator.close(),t.$Toast("网络出现错误或服务暂时不可用")})},play:function(t){var e=this.routerPath,i=this.songList;this.$store.commit("setView",e),this.$store.commit("setSongList",i),this.$store.commit("setCurPlayIndex",t),this.$store.dispatch("playSong")},scrollLoad:function(){if(!this.isLoading&&!this.allLoaded){var t=document.documentElement,e=t.scrollTop;t.scrollHeight-e-t.clientHeight<=100&&(this.page<this.totalPage?(this.page++,this.searchList()):(this.allLoaded=!0,this.$Toast("已加载全部数据！")))}}},components:{banner:m}},p=(i(168),Object(d.a)(g,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content"},[i("banner",{directives:[{name:"show",rawName:"v-show",value:"new"===t.routerPath,expression:"routerPath === 'new'"}]}),t._v(" "),i("div",{staticClass:"list",class:[t.routerPath+"-songList",{noSongData:0===t.songList.length}]},[t.songList.length>0?i("ul",t._l(t.songList,function(e,n){return i("li",{key:n,class:{active:t.view===t.routerPath&&n===t.curPlayIndex&&t.isPlayed},on:{click:function(e){t.play(n)}}},[i("p",{staticClass:"filename"},[t._v(t._s(e.FileName))])])})):i("p",[t._v("暂无数据！")])])],1)},[],!1,null,null,null));e.default=p.exports}}]);